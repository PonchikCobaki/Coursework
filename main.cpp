#include "Account.h"
//#include "Keyboard.h"
//#include "CMenu.h"
#include "BinFO.h"
#include "Array.h"

#include <conio.h>
#include <sstream>
#include <string>
#include <iostream>
#include <iomanip>
#include <fstream>
#include <list>
#include <vector>
#include <iterator>
#include <random>
#include <Windows.h>



int main(int argc, char* argv[])
{
	using namespace std;

	setlocale(LC_ALL, "ru");

	// выбор пути файла
	string path;
	//string path = "random_data.bin";	//to do dbg
	if (argc > 1) {
		path = argv[1];
	}
	else {
		cout << "введите путь и название файла: ";
		getline(cin, path);
	}

	// установка нормативных баллов
	uint16_t passingScore = 100;
	uint16_t minMathScore = 0, minRuLangScore = 0, minEnLangScore = 0;

	//cout << "введите сумму проходных баллов: ";
	//cin >> passingScore;
	//cout << "введите минимальное значение баллов по матаметике: ";
	//cin >> minMathScore;
	//cout << "введите минимальное значение баллов по русскому языку: ";
	//cin >> minRuLangScore;
	//cout << "введите минимальное значение баллов по английскому: ";
	//cin >> minEnLangScore;

	//	основные переменные 
	my::Array Exam;			//	контейнер для неупорядоченного хранения данных пользователя в памяти
	//u_int horizontalPos = 1, verticalPos = 1;	//	переменные положения меню

	bool	exitFlag = true;	//	флаг выхода из программы 
	short	codeItem(0);		//	состояние клавиатуры
	uint32_t len;
	ReadingBinaryFile(path, Exam, 0, 0, len);
	cout << "len: " << len << endl;
	cout << "len Exam: " << Exam.getSize() << endl;
	ReadingBinaryFile(path, Exam, 0, 100, len);
	cout << "len Exam: " << Exam.getSize() << endl;

	for (short i = 0; i < Exam.getSize(); ++i) {
		cout << "№" << i << endl;
		std::cout << "Имя: " << Exam[i].getFirstName() << " ";
		std::cout << "Фамилия: " << Exam[i].getLastName() << " ";
		std::cout << Exam[i].getMathScore() << " ";
		std::cout << Exam[i].getRuLangScore() << " ";
		std::cout << Exam[i].getEnLangScore() << " ";
		std::cout << Exam[i].getTotalScore() << std::endl;
	}

	WriteInBinaryFile(path, Exam);

	//while (exitFlag)
	//{
	//	PrintMainMenu(verticalPos, allMenuTemplates, InsertCursorPosition);	// вывод основного меню

	//	codeItem = ButtonsReading(horizontalPos, verticalPos);					// чтение клавиатуры
	//	FindingCursorPosition(verticalPos, static_cast<int>(HEIGHT_ITEM_MAIN));	// установка курсора

	//	if (codeItem == KEY_ENTER)
	//	{
	//		switch (verticalPos)
	//		{
	//		case ITEM_VIEW:
	//			PrintTable(path, usersData, allMenuTemplates,
	//				InsertCursorPosition, SelectionMenuPrinting, ButtonsReading,
	//				FindingCursorPosition, FindingCursorPosition,
	//				ReadingBinaryFile, WriteInBinaryFile, DeletingFromBinaryFile,
	//				ChangeDataInBinaryFile, AppendInBinaryFile, UserInput);
	//			break;

	//		case ITEM_STATISTICS:
	//			ComputeStatistics(passingScore, minMathScore, minRuLangScore, minEnLangScore, path, usersData,
	//				ReadingBinaryFile, PrintTable, InsertCursorPosition, ButtonsReading, FindingCursorPosition);
	//			break;

	//		case ITEM_CREATE:
	//			PrintCreateItem(path, InsertCursorPosition, ButtonsReading, FindingCursorPosition, SelectionMenuPrinting, UserInput);
	//			//CreateRandomBinDataset(path);
	//			break;

	//		case ITEM_EXIT:
	//			exitFlag = false;

	//		}
	//	}
	//}


	return 0;
}